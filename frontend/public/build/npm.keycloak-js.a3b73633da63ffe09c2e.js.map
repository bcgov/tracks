{"version":3,"sources":["webpack:///./node_modules/keycloak-js/dist/keycloak.js"],"names":["window","module","exports","sha256_imported","base64js_imported","Promise","Error","loggedPromiseDeprecation","logPromiseDeprecation","console","warn","Keycloak","config","this","adapter","callbackStorage","kc","refreshQueue","loginIframe","enable","callbackList","interval","scripts","document","getElementsByTagName","i","length","src","indexOf","iframeVersion","substring","split","useNonce","logInfo","createLogger","info","logWarn","generateRandomString","len","alphabet","randomData","array","crypto","msCrypto","getRandomValues","Uint8Array","Array","j","Math","floor","random","generateRandomData","chars","charCodeAt","String","fromCharCode","apply","getRealmUrl","authServerUrl","charAt","encodeURIComponent","realm","processCallback","oauth","promise","code","error","prompt","timeLocal","Date","getTime","onActionUpdate","errorData","error_description","onAuthError","setError","setSuccess","flow","access_token","id_token","authSuccess","params","url","endpoints","token","req","XMLHttpRequest","open","setRequestHeader","clientId","redirectUri","pkceCodeVerifier","withCredentials","onreadystatechange","readyState","status","tokenResponse","JSON","parse","responseText","scheduleCheckIframe","send","accessToken","refreshToken","idToken","fulfillPromise","setToken","tokenParsed","nonce","storedNonce","refreshTokenParsed","idTokenParsed","clearToken","onAuthSuccess","fileLoaded","xhr","responseURL","startsWith","tokenTimeoutHandle","clearTimeout","decodeToken","sessionId","session_state","authenticated","subject","sub","realmAccess","realm_access","resourceAccess","resource_access","timeSkew","iat","onTokenExpired","expiresIn","round","setTimeout","str","replace","decodeURIComponent","escape","atob","createUUID","s","substr","join","parseCallback","supportedParams","push","newUrl","parsed","queryIndex","fragmentIndex","responseMode","parseCallbackParams","paramsString","oauthParams","state","parseCallbackUrl","oauthState","get","valid","p","result","key","slice","createPromise","resolve","reject","success","callback","then","value","catch","setupCheckLoginIframe","iframe","createElement","onload","authUrl","authorize","iframeOrigin","location","origin","protocol","hostname","port","checkSessionIframe","setAttribute","style","display","body","appendChild","addEventListener","event","contentWindow","source","data","callbacks","splice","checkLoginIframe","unchanged","msg","postMessage","check3pCookiesSupported","silentCheckSsoRedirectUri","thirdPartyCookiesIframe","messageCallback","silentCheckSsoFallback","removeChild","removeEventListener","loadAdapter","type","login","options","createLoginUrl","logout","createLogoutUrl","register","createRegisterUrl","accountManagement","accountUrl","createAccountUrl","href","encodeHash","arguments","cordovaOpenWindowWrapper","loginUrl","target","cordova","InAppBrowser","createCordovaOptions","userOptions","cordovaOptions","Object","keys","reduce","optionName","shallowCloneCordovaOptions","hidden","formatCordovaOptions","ref","completed","closed","closeBrowser","close","reason","logoutUrl","registerUrl","universalLinks","subscribe","unsubscribe","plugins","browsertab","openUrl","init","initOptions","LocalStorage","err","CookieStorage","createCallbackStorage","Cordova","checkLoginIframeInterval","onLoad","loginRequired","responseType","pkceMethod","enableLogging","initPromise","onReady","configPromise","configUrl","setupOidcEndoints","oidcConfiguration","authorization_endpoint","token_endpoint","end_session_endpoint","check_session_iframe","userinfo","userinfo_endpoint","oidcProvider","oidcProviderConfigUrl","match","loadConfig","doLogin","checkSsoSilently","ifrm","processInit","history","replaceState","e","updateToken","checkReadyState","domReady","baseUrl","scope","callbackState","action","maxAge","loginHint","idpHint","locale","codeVerifier","hashBytes","arrayBuffer","fromByteArray","generatePkceChallenge","add","undefined","hasRealmRole","role","access","roles","hasResourceRole","resource","loadUserProfile","profile","loadUserInfo","userInfo","isTokenExpired","minValidity","ceil","isNaN","exec","onAuthRefreshSuccess","pop","onAuthRefreshError","onAuthLogout","clearExpired","time","localStorage","getItem","expires","removeItem","setItem","stringify","getCookie","setCookie","cookieExpiration","minutes","exp","setTime","name","ca","cookie","c","expirationDate","toUTCString","fn","prototype","call","factory"],"mappings":"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","file":"npm.keycloak-js.a3b73633da63ffe09c2e.js","sourcesContent":["/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, factory) {\n    if ( typeof exports === 'object' ) {\n        if ( typeof module === 'object' ) {\n            module.exports = factory( require(\"js-sha256\"), require(\"base64-js\") );\n        } else {\n            exports[\"keycloak\"] = factory( require(\"js-sha256\"), require(\"base64-js\") );\n        }\n    } else {\n        /**\n        * [js-sha256]{@link https://github.com/emn178/js-sha256}\n        *\n        * @version 0.9.0\n        * @author Chen, Yi-Cyuan [emn178@gmail.com]\n        * @copyright Chen, Yi-Cyuan 2014-2017\n        * @license MIT\n        */\n        !function () { \"use strict\"; function t(t, i) { i ? (d[0] = d[16] = d[1] = d[2] = d[3] = d[4] = d[5] = d[6] = d[7] = d[8] = d[9] = d[10] = d[11] = d[12] = d[13] = d[14] = d[15] = 0, this.blocks = d) : this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t ? (this.h0 = 3238371032, this.h1 = 914150663, this.h2 = 812702999, this.h3 = 4144912697, this.h4 = 4290775857, this.h5 = 1750603025, this.h6 = 1694076839, this.h7 = 3204075428) : (this.h0 = 1779033703, this.h1 = 3144134277, this.h2 = 1013904242, this.h3 = 2773480762, this.h4 = 1359893119, this.h5 = 2600822924, this.h6 = 528734635, this.h7 = 1541459225), this.block = this.start = this.bytes = this.hBytes = 0, this.finalized = this.hashed = !1, this.first = !0, this.is224 = t } function i(i, r, s) { var e, n = typeof i; if (\"string\" === n) { var o, a = [], u = i.length, c = 0; for (e = 0; e < u; ++e)(o = i.charCodeAt(e)) < 128 ? a[c++] = o : o < 2048 ? (a[c++] = 192 | o >> 6, a[c++] = 128 | 63 & o) : o < 55296 || o >= 57344 ? (a[c++] = 224 | o >> 12, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o) : (o = 65536 + ((1023 & o) << 10 | 1023 & i.charCodeAt(++e)), a[c++] = 240 | o >> 18, a[c++] = 128 | o >> 12 & 63, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o); i = a } else { if (\"object\" !== n) throw new Error(h); if (null === i) throw new Error(h); if (f && i.constructor === ArrayBuffer) i = new Uint8Array(i); else if (!(Array.isArray(i) || f && ArrayBuffer.isView(i))) throw new Error(h) } i.length > 64 && (i = new t(r, !0).update(i).array()); var y = [], p = []; for (e = 0; e < 64; ++e) { var l = i[e] || 0; y[e] = 92 ^ l, p[e] = 54 ^ l } t.call(this, r, s), this.update(p), this.oKeyPad = y, this.inner = !0, this.sharedMemory = s } var h = \"input is invalid type\", r = \"object\" == typeof window, s = r ? window : {}; s.JS_SHA256_NO_WINDOW && (r = !1); var e = !r && \"object\" == typeof self, n = !s.JS_SHA256_NO_NODE_JS && \"object\" == typeof process && process.versions && process.versions.node; n ? s = global : e && (s = self); var o = !s.JS_SHA256_NO_COMMON_JS && \"object\" == typeof module && module.exports, a = \"function\" == typeof define && define.amd, f = !s.JS_SHA256_NO_ARRAY_BUFFER && \"undefined\" != typeof ArrayBuffer, u = \"0123456789abcdef\".split(\"\"), c = [-2147483648, 8388608, 32768, 128], y = [24, 16, 8, 0], p = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298], l = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"], d = []; !s.JS_SHA256_NO_NODE_JS && Array.isArray || (Array.isArray = function (t) { return \"[object Array]\" === Object.prototype.toString.call(t) }), !f || !s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW && ArrayBuffer.isView || (ArrayBuffer.isView = function (t) { return \"object\" == typeof t && t.buffer && t.buffer.constructor === ArrayBuffer }); var A = function (i, h) { return function (r) { return new t(h, !0).update(r)[i]() } }, w = function (i) { var h = A(\"hex\", i); n && (h = b(h, i)), h.create = function () { return new t(i) }, h.update = function (t) { return h.create().update(t) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = A(s, i) } return h }, b = function (t, i) { var r = eval(\"require('crypto')\"), s = eval(\"require('buffer').Buffer\"), e = i ? \"sha224\" : \"sha256\", n = function (i) { if (\"string\" == typeof i) return r.createHash(e).update(i, \"utf8\").digest(\"hex\"); if (null === i || void 0 === i) throw new Error(h); return i.constructor === ArrayBuffer && (i = new Uint8Array(i)), Array.isArray(i) || ArrayBuffer.isView(i) || i.constructor === s ? r.createHash(e).update(new s(i)).digest(\"hex\") : t(i) }; return n }, v = function (t, h) { return function (r, s) { return new i(r, h, !0).update(s)[t]() } }, _ = function (t) { var h = v(\"hex\", t); h.create = function (h) { return new i(h, t) }, h.update = function (t, i) { return h.create(t).update(i) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = v(s, t) } return h }; t.prototype.update = function (t) { if (!this.finalized) { var i, r = typeof t; if (\"string\" !== r) { if (\"object\" !== r) throw new Error(h); if (null === t) throw new Error(h); if (f && t.constructor === ArrayBuffer) t = new Uint8Array(t); else if (!(Array.isArray(t) || f && ArrayBuffer.isView(t))) throw new Error(h); i = !0 } for (var s, e, n = 0, o = t.length, a = this.blocks; n < o;) { if (this.hashed && (this.hashed = !1, a[0] = this.block, a[16] = a[1] = a[2] = a[3] = a[4] = a[5] = a[6] = a[7] = a[8] = a[9] = a[10] = a[11] = a[12] = a[13] = a[14] = a[15] = 0), i) for (e = this.start; n < o && e < 64; ++n)a[e >> 2] |= t[n] << y[3 & e++]; else for (e = this.start; n < o && e < 64; ++n)(s = t.charCodeAt(n)) < 128 ? a[e >> 2] |= s << y[3 & e++] : s < 2048 ? (a[e >> 2] |= (192 | s >> 6) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : s < 55296 || s >= 57344 ? (a[e >> 2] |= (224 | s >> 12) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : (s = 65536 + ((1023 & s) << 10 | 1023 & t.charCodeAt(++n)), a[e >> 2] |= (240 | s >> 18) << y[3 & e++], a[e >> 2] |= (128 | s >> 12 & 63) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]); this.lastByteIndex = e, this.bytes += e - this.start, e >= 64 ? (this.block = a[16], this.start = e - 64, this.hash(), this.hashed = !0) : this.start = e } return this.bytes > 4294967295 && (this.hBytes += this.bytes / 4294967296 << 0, this.bytes = this.bytes % 4294967296), this } }, t.prototype.finalize = function () { if (!this.finalized) { this.finalized = !0; var t = this.blocks, i = this.lastByteIndex; t[16] = this.block, t[i >> 2] |= c[3 & i], this.block = t[16], i >= 56 && (this.hashed || this.hash(), t[0] = this.block, t[16] = t[1] = t[2] = t[3] = t[4] = t[5] = t[6] = t[7] = t[8] = t[9] = t[10] = t[11] = t[12] = t[13] = t[14] = t[15] = 0), t[14] = this.hBytes << 3 | this.bytes >>> 29, t[15] = this.bytes << 3, this.hash() } }, t.prototype.hash = function () { var t, i, h, r, s, e, n, o, a, f = this.h0, u = this.h1, c = this.h2, y = this.h3, l = this.h4, d = this.h5, A = this.h6, w = this.h7, b = this.blocks; for (t = 16; t < 64; ++t)i = ((s = b[t - 15]) >>> 7 | s << 25) ^ (s >>> 18 | s << 14) ^ s >>> 3, h = ((s = b[t - 2]) >>> 17 | s << 15) ^ (s >>> 19 | s << 13) ^ s >>> 10, b[t] = b[t - 16] + i + b[t - 7] + h << 0; for (a = u & c, t = 0; t < 64; t += 4)this.first ? (this.is224 ? (e = 300032, w = (s = b[0] - 1413257819) - 150054599 << 0, y = s + 24177077 << 0) : (e = 704751109, w = (s = b[0] - 210244248) - 1521486534 << 0, y = s + 143694565 << 0), this.first = !1) : (i = (f >>> 2 | f << 30) ^ (f >>> 13 | f << 19) ^ (f >>> 22 | f << 10), r = (e = f & u) ^ f & c ^ a, w = y + (s = w + (h = (l >>> 6 | l << 26) ^ (l >>> 11 | l << 21) ^ (l >>> 25 | l << 7)) + (l & d ^ ~l & A) + p[t] + b[t]) << 0, y = s + (i + r) << 0), i = (y >>> 2 | y << 30) ^ (y >>> 13 | y << 19) ^ (y >>> 22 | y << 10), r = (n = y & f) ^ y & u ^ e, A = c + (s = A + (h = (w >>> 6 | w << 26) ^ (w >>> 11 | w << 21) ^ (w >>> 25 | w << 7)) + (w & l ^ ~w & d) + p[t + 1] + b[t + 1]) << 0, i = ((c = s + (i + r) << 0) >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10), r = (o = c & y) ^ c & f ^ n, d = u + (s = d + (h = (A >>> 6 | A << 26) ^ (A >>> 11 | A << 21) ^ (A >>> 25 | A << 7)) + (A & w ^ ~A & l) + p[t + 2] + b[t + 2]) << 0, i = ((u = s + (i + r) << 0) >>> 2 | u << 30) ^ (u >>> 13 | u << 19) ^ (u >>> 22 | u << 10), r = (a = u & c) ^ u & y ^ o, l = f + (s = l + (h = (d >>> 6 | d << 26) ^ (d >>> 11 | d << 21) ^ (d >>> 25 | d << 7)) + (d & A ^ ~d & w) + p[t + 3] + b[t + 3]) << 0, f = s + (i + r) << 0; this.h0 = this.h0 + f << 0, this.h1 = this.h1 + u << 0, this.h2 = this.h2 + c << 0, this.h3 = this.h3 + y << 0, this.h4 = this.h4 + l << 0, this.h5 = this.h5 + d << 0, this.h6 = this.h6 + A << 0, this.h7 = this.h7 + w << 0 }, t.prototype.hex = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = u[t >> 28 & 15] + u[t >> 24 & 15] + u[t >> 20 & 15] + u[t >> 16 & 15] + u[t >> 12 & 15] + u[t >> 8 & 15] + u[t >> 4 & 15] + u[15 & t] + u[i >> 28 & 15] + u[i >> 24 & 15] + u[i >> 20 & 15] + u[i >> 16 & 15] + u[i >> 12 & 15] + u[i >> 8 & 15] + u[i >> 4 & 15] + u[15 & i] + u[h >> 28 & 15] + u[h >> 24 & 15] + u[h >> 20 & 15] + u[h >> 16 & 15] + u[h >> 12 & 15] + u[h >> 8 & 15] + u[h >> 4 & 15] + u[15 & h] + u[r >> 28 & 15] + u[r >> 24 & 15] + u[r >> 20 & 15] + u[r >> 16 & 15] + u[r >> 12 & 15] + u[r >> 8 & 15] + u[r >> 4 & 15] + u[15 & r] + u[s >> 28 & 15] + u[s >> 24 & 15] + u[s >> 20 & 15] + u[s >> 16 & 15] + u[s >> 12 & 15] + u[s >> 8 & 15] + u[s >> 4 & 15] + u[15 & s] + u[e >> 28 & 15] + u[e >> 24 & 15] + u[e >> 20 & 15] + u[e >> 16 & 15] + u[e >> 12 & 15] + u[e >> 8 & 15] + u[e >> 4 & 15] + u[15 & e] + u[n >> 28 & 15] + u[n >> 24 & 15] + u[n >> 20 & 15] + u[n >> 16 & 15] + u[n >> 12 & 15] + u[n >> 8 & 15] + u[n >> 4 & 15] + u[15 & n]; return this.is224 || (a += u[o >> 28 & 15] + u[o >> 24 & 15] + u[o >> 20 & 15] + u[o >> 16 & 15] + u[o >> 12 & 15] + u[o >> 8 & 15] + u[o >> 4 & 15] + u[15 & o]), a }, t.prototype.toString = t.prototype.hex, t.prototype.digest = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24 & 255, i >> 16 & 255, i >> 8 & 255, 255 & i, h >> 24 & 255, h >> 16 & 255, h >> 8 & 255, 255 & h, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, s >> 24 & 255, s >> 16 & 255, s >> 8 & 255, 255 & s, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, n >> 24 & 255, n >> 16 & 255, n >> 8 & 255, 255 & n]; return this.is224 || a.push(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o), a }, t.prototype.array = t.prototype.digest, t.prototype.arrayBuffer = function () { this.finalize(); var t = new ArrayBuffer(this.is224 ? 28 : 32), i = new DataView(t); return i.setUint32(0, this.h0), i.setUint32(4, this.h1), i.setUint32(8, this.h2), i.setUint32(12, this.h3), i.setUint32(16, this.h4), i.setUint32(20, this.h5), i.setUint32(24, this.h6), this.is224 || i.setUint32(28, this.h7), t }, i.prototype = new t, i.prototype.finalize = function () { if (t.prototype.finalize.call(this), this.inner) { this.inner = !1; var i = this.array(); t.call(this, this.is224, this.sharedMemory), this.update(this.oKeyPad), this.update(i), t.prototype.finalize.call(this) } }; var B = w(); B.sha256 = B, B.sha224 = w(!0), B.sha256.hmac = _(), B.sha224.hmac = _(!0), o ? module.exports = B : (s.sha256 = B.sha256, s.sha224 = B.sha224, a && define(function () { return B })) }();\n\n        /**\n         * [base64-js]{@link https://github.com/beatgammit/base64-js}\n         *\n         * @version v1.3.0\n         * @author Kirill, Fomichev\n         * @copyright Kirill, Fomichev 2014\n         * @license MIT\n         */\n        (function (r) { if (typeof exports === \"object\" && typeof module !== \"undefined\") { module.exports = r() } else if (typeof define === \"function\" && define.amd) { define([], r) } else { var e; if (typeof window !== \"undefined\") { e = window } else if (typeof global !== \"undefined\") { e = global } else if (typeof self !== \"undefined\") { e = self } else { e = this } e.base64js = r() } })(function () { var r, e, n; return function () { function r(e, n, t) { function o(f, i) { if (!n[f]) { if (!e[f]) { var u = \"function\" == typeof require && require; if (!i && u) return u(f, !0); if (a) return a(f, !0); var v = new Error(\"Cannot find module '\" + f + \"'\"); throw v.code = \"MODULE_NOT_FOUND\", v } var d = n[f] = { exports: {} }; e[f][0].call(d.exports, function (r) { var n = e[f][1][r]; return o(n || r) }, d, d.exports, r, e, n, t) } return n[f].exports } for (var a = \"function\" == typeof require && require, f = 0; f < t.length; f++)o(t[f]); return o } return r }()({ \"/\": [function (r, e, n) { \"use strict\"; n.byteLength = d; n.toByteArray = h; n.fromByteArray = p; var t = []; var o = []; var a = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array; var f = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"; for (var i = 0, u = f.length; i < u; ++i) { t[i] = f[i]; o[f.charCodeAt(i)] = i } o[\"-\".charCodeAt(0)] = 62; o[\"_\".charCodeAt(0)] = 63; function v(r) { var e = r.length; if (e % 4 > 0) { throw new Error(\"Invalid string. Length must be a multiple of 4\") } var n = r.indexOf(\"=\"); if (n === -1) n = e; var t = n === e ? 0 : 4 - n % 4; return [n, t] } function d(r) { var e = v(r); var n = e[0]; var t = e[1]; return (n + t) * 3 / 4 - t } function c(r, e, n) { return (e + n) * 3 / 4 - n } function h(r) { var e; var n = v(r); var t = n[0]; var f = n[1]; var i = new a(c(r, t, f)); var u = 0; var d = f > 0 ? t - 4 : t; for (var h = 0; h < d; h += 4) { e = o[r.charCodeAt(h)] << 18 | o[r.charCodeAt(h + 1)] << 12 | o[r.charCodeAt(h + 2)] << 6 | o[r.charCodeAt(h + 3)]; i[u++] = e >> 16 & 255; i[u++] = e >> 8 & 255; i[u++] = e & 255 } if (f === 2) { e = o[r.charCodeAt(h)] << 2 | o[r.charCodeAt(h + 1)] >> 4; i[u++] = e & 255 } if (f === 1) { e = o[r.charCodeAt(h)] << 10 | o[r.charCodeAt(h + 1)] << 4 | o[r.charCodeAt(h + 2)] >> 2; i[u++] = e >> 8 & 255; i[u++] = e & 255 } return i } function s(r) { return t[r >> 18 & 63] + t[r >> 12 & 63] + t[r >> 6 & 63] + t[r & 63] } function l(r, e, n) { var t; var o = []; for (var a = e; a < n; a += 3) { t = (r[a] << 16 & 16711680) + (r[a + 1] << 8 & 65280) + (r[a + 2] & 255); o.push(s(t)) } return o.join(\"\") } function p(r) { var e; var n = r.length; var o = n % 3; var a = []; var f = 16383; for (var i = 0, u = n - o; i < u; i += f) { a.push(l(r, i, i + f > u ? u : i + f)) } if (o === 1) { e = r[n - 1]; a.push(t[e >> 2] + t[e << 4 & 63] + \"==\") } else if (o === 2) { e = (r[n - 2] << 8) + r[n - 1]; a.push(t[e >> 10] + t[e >> 4 & 63] + t[e << 2 & 63] + \"=\") } return a.join(\"\") } }, {}] }, {}, [])(\"/\") });\n\n        /**\n         * [promise-polyfill]{@link https://github.com/taylorhakes/promise-polyfill}\n         *\n         * @version v8.1.3\n         * @author Hakes, Taylor\n         * @copyright Hakes, Taylor 2014\n         * @license MIT\n         */\n        !function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n():\"function\"==typeof define&&define.amd?define(n):n()}(0,function(){\"use strict\";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(e){return!(!e||\"undefined\"==typeof e.length)}function t(){}function o(e){if(!(this instanceof o))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],c(e,this)}function r(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(r){return void f(n.promise,r)}i(n.promise,o)}else(1===e._state?i:f)(n.promise,e._value)})):e._deferreds.push(n)}function i(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var t=n.then;if(n instanceof o)return e._state=3,e._value=n,void u(e);if(\"function\"==typeof t)return void c(function(e,n){return function(){e.apply(n,arguments)}}(t,n),e)}e._state=1,e._value=n,u(e)}catch(r){f(e,r)}}function f(e,n){e._state=2,e._value=n,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;t>n;n++)r(e,e._deferreds[n]);e._deferreds=null}function c(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,f(n,e))})}catch(o){if(t)return;t=!0,f(n,o)}}var a=setTimeout;o.prototype[\"catch\"]=function(e){return this.then(null,e)},o.prototype.then=function(e,n){var o=new this.constructor(t);return r(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t}(e,n,o)),o},o.prototype[\"finally\"]=e,o.all=function(e){return new o(function(t,o){function r(e,n){try{if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var u=n.then;if(\"function\"==typeof u)return void u.call(n,function(n){r(e,n)},o)}i[e]=n,0==--f&&t(i)}catch(c){o(c)}}if(!n(e))return o(new TypeError(\"Promise.all accepts an array\"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var f=i.length,u=0;i.length>u;u++)r(u,i[u])})},o.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===o?e:new o(function(n){n(e)})},o.reject=function(e){return new o(function(n,t){t(e)})},o.race=function(e){return new o(function(t,r){if(!n(e))return r(new TypeError(\"Promise.race accepts an array\"));for(var i=0,f=e.length;f>i;i++)o.resolve(e[i]).then(t,r)})},o._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){a(e,0)},o._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=o});\n\n        var Keycloak = factory( root[\"sha256\"], root[\"base64js\"] );\n        root[\"Keycloak\"] = Keycloak;\n\n        if ( typeof define === \"function\" && define.amd ) {\n            define( \"keycloak\", [], function () { return Keycloak; } );\n        }\n    }\n})(window, function (sha256_imported, base64js_imported) {\n    if (typeof Promise === 'undefined') {\n        throw Error('Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.');\n    }\n\n    var loggedPromiseDeprecation = false;\n\n    function logPromiseDeprecation() {\n        if (!loggedPromiseDeprecation) {\n            loggedPromiseDeprecation = true;\n            console.warn('[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead.');\n        }\n    }\n\n    function Keycloak (config) {\n        if (!(this instanceof Keycloak)) {\n            return new Keycloak(config);\n        }\n\n        var kc = this;\n        var adapter;\n        var refreshQueue = [];\n        var callbackStorage;\n\n        var loginIframe = {\n            enable: true,\n            callbackList: [],\n            interval: 5\n        };\n\n        var scripts = document.getElementsByTagName('script');\n        for (var i = 0; i < scripts.length; i++) {\n            if ((scripts[i].src.indexOf('keycloak.js') !== -1 || scripts[i].src.indexOf('keycloak.min.js') !== -1) && scripts[i].src.indexOf('version=') !== -1) {\n                kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf('version=') + 8).split('&')[0];\n            }\n        }\n\n        var useNonce = true;\n        var logInfo = createLogger(console.info);\n        var logWarn = createLogger(console.warn);\n\n        kc.init = function (initOptions) {\n            kc.authenticated = false;\n\n            callbackStorage = createCallbackStorage();\n            var adapters = ['default', 'cordova', 'cordova-native'];\n\n            if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n                adapter = loadAdapter(initOptions.adapter);\n            } else if (initOptions && typeof initOptions.adapter === \"object\") {\n                adapter = initOptions.adapter;\n            } else {\n                if (window.Cordova || window.cordova) {\n                    adapter = loadAdapter('cordova');\n                } else {\n                    adapter = loadAdapter();\n                }\n            }\n\n            if (initOptions) {\n                if (typeof initOptions.useNonce !== 'undefined') {\n                    useNonce = initOptions.useNonce;\n                }\n\n                if (typeof initOptions.checkLoginIframe !== 'undefined') {\n                    loginIframe.enable = initOptions.checkLoginIframe;\n                }\n\n                if (initOptions.checkLoginIframeInterval) {\n                    loginIframe.interval = initOptions.checkLoginIframeInterval;\n                }\n\n                if (initOptions.onLoad === 'login-required') {\n                    kc.loginRequired = true;\n                }\n\n                if (initOptions.responseMode) {\n                    if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n                        kc.responseMode = initOptions.responseMode;\n                    } else {\n                        throw 'Invalid value for responseMode';\n                    }\n                }\n\n                if (initOptions.flow) {\n                    switch (initOptions.flow) {\n                        case 'standard':\n                            kc.responseType = 'code';\n                            break;\n                        case 'implicit':\n                            kc.responseType = 'id_token token';\n                            break;\n                        case 'hybrid':\n                            kc.responseType = 'code id_token token';\n                            break;\n                        default:\n                            throw 'Invalid value for flow';\n                    }\n                    kc.flow = initOptions.flow;\n                }\n\n                if (initOptions.timeSkew != null) {\n                    kc.timeSkew = initOptions.timeSkew;\n                }\n\n                if(initOptions.redirectUri) {\n                    kc.redirectUri = initOptions.redirectUri;\n                }\n\n                if (initOptions.silentCheckSsoRedirectUri) {\n                    kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n                }\n\n                if (typeof initOptions.silentCheckSsoFallback === 'boolean') {\n                    kc.silentCheckSsoFallback = initOptions.silentCheckSsoFallback;\n                } else {\n                    kc.silentCheckSsoFallback = true;\n                }\n\n                if (initOptions.pkceMethod) {\n                    if (initOptions.pkceMethod !== \"S256\") {\n                        throw 'Invalid value for pkceMethod';\n                    }\n                    kc.pkceMethod = initOptions.pkceMethod;\n                }\n\n                if (typeof initOptions.enableLogging === 'boolean') {\n                    kc.enableLogging = initOptions.enableLogging;\n                } else {\n                    kc.enableLogging = false;\n                }\n            }\n\n            if (!kc.responseMode) {\n                kc.responseMode = 'fragment';\n            }\n            if (!kc.responseType) {\n                kc.responseType = 'code';\n                kc.flow = 'standard';\n            }\n\n            var promise = createPromise();\n\n            var initPromise = createPromise();\n            initPromise.promise.then(function() {\n                kc.onReady && kc.onReady(kc.authenticated);\n                promise.setSuccess(kc.authenticated);\n            }).catch(function(errorData) {\n                promise.setError(errorData);\n            });\n\n            var configPromise = loadConfig(config);\n\n            function onLoad() {\n                var doLogin = function(prompt) {\n                    if (!prompt) {\n                        options.prompt = 'none';\n                    }\n\n                    kc.login(options).then(function () {\n                        initPromise.setSuccess();\n                    }).catch(function () {\n                        initPromise.setError();\n                    });\n                }\n\n                var checkSsoSilently = function() {\n                    var ifrm = document.createElement(\"iframe\");\n                    var src = kc.createLoginUrl({prompt: 'none', redirectUri: kc.silentCheckSsoRedirectUri});\n                    ifrm.setAttribute(\"src\", src);\n                    ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                    ifrm.style.display = \"none\";\n                    document.body.appendChild(ifrm);\n\n                    var messageCallback = function(event) {\n                        if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                            return;\n                        }\n\n                        var oauth = parseCallback(event.data);\n                        processCallback(oauth, initPromise);\n\n                        document.body.removeChild(ifrm);\n                        window.removeEventListener(\"message\", messageCallback);\n                    };\n\n                    window.addEventListener(\"message\", messageCallback);\n                };\n\n                var options = {};\n                switch (initOptions.onLoad) {\n                    case 'check-sso':\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().then(function() {\n                                checkLoginIframe().then(function (unchanged) {\n                                    if (!unchanged) {\n                                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).catch(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                        }\n                        break;\n                    case 'login-required':\n                        doLogin(true);\n                        break;\n                    default:\n                        throw 'Invalid value for onLoad';\n                }\n            }\n\n            function processInit() {\n                var callback = parseCallback(window.location.href);\n\n                if (callback) {\n                    window.history.replaceState(window.history.state, null, callback.newUrl);\n                }\n\n                if (callback && callback.valid) {\n                    return setupCheckLoginIframe().then(function() {\n                        processCallback(callback, initPromise);\n                    }).catch(function (e) {\n                        initPromise.setError();\n                    });\n                } else if (initOptions) {\n                    if (initOptions.token && initOptions.refreshToken) {\n                        setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().then(function() {\n                                checkLoginIframe().then(function (unchanged) {\n                                    if (unchanged) {\n                                        kc.onAuthSuccess && kc.onAuthSuccess();\n                                        initPromise.setSuccess();\n                                        scheduleCheckIframe();\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).catch(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.updateToken(-1).then(function() {\n                                kc.onAuthSuccess && kc.onAuthSuccess();\n                                initPromise.setSuccess();\n                            }).catch(function() {\n                                kc.onAuthError && kc.onAuthError();\n                                if (initOptions.onLoad) {\n                                    onLoad();\n                                } else {\n                                    initPromise.setError();\n                                }\n                            });\n                        }\n                    } else if (initOptions.onLoad) {\n                        onLoad();\n                    } else {\n                        initPromise.setSuccess();\n                    }\n                } else {\n                    initPromise.setSuccess();\n                }\n            }\n\n            function domReady() {\n                var promise = createPromise();\n\n                var checkReadyState = function () {\n                    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n                        document.removeEventListener('readystatechange', checkReadyState);\n                        promise.setSuccess();\n                    }\n                }\n                document.addEventListener('readystatechange', checkReadyState);\n\n                checkReadyState(); // just in case the event was already fired and we missed it (in case the init is done later than at the load time, i.e. it's done from code)\n\n                return promise.promise;\n            }\n\n            configPromise.then(function () {\n                domReady().then(check3pCookiesSupported).then(processInit)\n                .catch(function() {\n                    promise.setError();\n                });\n            });\n            configPromise.catch(function() {\n                promise.setError();\n            });\n\n            return promise.promise;\n        }\n\n        kc.login = function (options) {\n            return adapter.login(options);\n        }\n\n        function generateRandomData(len) {\n            // use web crypto APIs if possible\n            var array = null;\n            var crypto = window.crypto || window.msCrypto;\n            if (crypto && crypto.getRandomValues && window.Uint8Array) {\n                array = new Uint8Array(len);\n                crypto.getRandomValues(array);\n                return array;\n            }\n\n            // fallback to Math random\n            array = new Array(len);\n            for (var j = 0; j < array.length; j++) {\n                array[j] = Math.floor(256 * Math.random());\n            }\n            return array;\n        }\n\n        function generateCodeVerifier(len) {\n            return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n        }\n\n        function generateRandomString(len, alphabet){\n            var randomData = generateRandomData(len);\n            var chars = new Array(len);\n            for (var i = 0; i < len; i++) {\n                chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n            }\n            return String.fromCharCode.apply(null, chars);\n        }\n\n        function generatePkceChallenge(pkceMethod, codeVerifier) {\n            switch (pkceMethod) {\n                // The use of the \"plain\" method is considered insecure and therefore not supported.\n                case \"S256\":\n                    // hash codeVerifier, then encode as url-safe base64 without padding\n                    var hashBytes = new Uint8Array(sha256_imported.arrayBuffer(codeVerifier));\n                    var encodedHash = base64js_imported.fromByteArray(hashBytes)\n                        .replace(/\\+/g, '-')\n                        .replace(/\\//g, '_')\n                        .replace(/\\=/g, '');\n                    return encodedHash;\n                default:\n                    throw 'Invalid value for pkceMethod';\n            }\n        }\n\n        kc.createLoginUrl = function(options) {\n            var state = createUUID();\n            var nonce = createUUID();\n\n            var redirectUri = adapter.redirectUri(options);\n\n            var callbackState = {\n                state: state,\n                nonce: nonce,\n                redirectUri: encodeURIComponent(redirectUri)\n            };\n\n            if (options && options.prompt) {\n                callbackState.prompt = options.prompt;\n            }\n\n            var baseUrl;\n            if (options && options.action == 'register') {\n                baseUrl = kc.endpoints.register();\n            } else {\n                baseUrl = kc.endpoints.authorize();\n            }\n\n            var scope;\n            if (options && options.scope) {\n                if (options.scope.indexOf(\"openid\") != -1) {\n                    scope = options.scope;\n                } else {\n                    scope = \"openid \" + options.scope;\n                }\n            } else {\n                scope = \"openid\";\n            }\n\n            var url = baseUrl\n                + '?client_id=' + encodeURIComponent(kc.clientId)\n                + '&redirect_uri=' + encodeURIComponent(redirectUri)\n                + '&state=' + encodeURIComponent(state)\n                + '&response_mode=' + encodeURIComponent(kc.responseMode)\n                + '&response_type=' + encodeURIComponent(kc.responseType)\n                + '&scope=' + encodeURIComponent(scope);\n            if (useNonce) {\n                url = url + '&nonce=' + encodeURIComponent(nonce);\n            }\n\n            if (options && options.prompt) {\n                url += '&prompt=' + encodeURIComponent(options.prompt);\n            }\n\n            if (options && options.maxAge) {\n                url += '&max_age=' + encodeURIComponent(options.maxAge);\n            }\n\n            if (options && options.loginHint) {\n                url += '&login_hint=' + encodeURIComponent(options.loginHint);\n            }\n\n            if (options && options.idpHint) {\n                url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n            }\n\n            if (options && options.action && options.action != 'register') {\n                url += '&kc_action=' + encodeURIComponent(options.action);\n            }\n\n            if (options && options.locale) {\n                url += '&ui_locales=' + encodeURIComponent(options.locale);\n            }\n\n            if (kc.pkceMethod) {\n                var codeVerifier = generateCodeVerifier(96);\n                callbackState.pkceCodeVerifier = codeVerifier;\n                var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n                url += '&code_challenge=' + pkceChallenge;\n                url += '&code_challenge_method=' + kc.pkceMethod;\n            }\n\n            callbackStorage.add(callbackState);\n\n            return url;\n        }\n\n        kc.logout = function(options) {\n            return adapter.logout(options);\n        }\n\n        kc.createLogoutUrl = function(options) {\n            var url = kc.endpoints.logout()\n                + '?redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false));\n\n            return url;\n        }\n\n        kc.register = function (options) {\n            return adapter.register(options);\n        }\n\n        kc.createRegisterUrl = function(options) {\n            if (!options) {\n                options = {};\n            }\n            options.action = 'register';\n            return kc.createLoginUrl(options);\n        }\n\n        kc.createAccountUrl = function(options) {\n            var realm = getRealmUrl();\n            var url = undefined;\n            if (typeof realm !== 'undefined') {\n                url = realm\n                + '/account'\n                + '?referrer=' + encodeURIComponent(kc.clientId)\n                + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n            }\n            return url;\n        }\n\n        kc.accountManagement = function() {\n            return adapter.accountManagement();\n        }\n\n        kc.hasRealmRole = function (role) {\n            var access = kc.realmAccess;\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.hasResourceRole = function(role, resource) {\n            if (!kc.resourceAccess) {\n                return false;\n            }\n\n            var access = kc.resourceAccess[resource || kc.clientId];\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.loadUserProfile = function() {\n            var url = getRealmUrl() + '/account';\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise();\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.profile = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.profile);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.loadUserInfo = function() {\n            var url = kc.endpoints.userinfo();\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise();\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.userInfo = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.userInfo);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.isTokenExpired = function(minValidity) {\n            if (!kc.tokenParsed || (!kc.refreshToken && kc.flow != 'implicit' )) {\n                throw 'Not authenticated';\n            }\n\n            if (kc.timeSkew == null) {\n                logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n                return true;\n            }\n\n            var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n            if (minValidity) {\n                if (isNaN(minValidity)) {\n                    throw 'Invalid minValidity';\n                }\n                expiresIn -= minValidity;\n            }\n            return expiresIn < 0;\n        }\n\n        kc.updateToken = function(minValidity) {\n            var promise = createPromise();\n\n            if (!kc.refreshToken) {\n                promise.setError();\n                return promise.promise;\n            }\n\n            minValidity = minValidity || 5;\n\n            var exec = function() {\n                var refreshToken = false;\n                if (minValidity == -1) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n                } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: token expired');\n                }\n\n                if (!refreshToken) {\n                    promise.setSuccess(false);\n                } else {\n                    var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n                    var url = kc.endpoints.token();\n\n                    refreshQueue.push(promise);\n\n                    if (refreshQueue.length == 1) {\n                        var req = new XMLHttpRequest();\n                        req.open('POST', url, true);\n                        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                        req.withCredentials = true;\n\n                        params += '&client_id=' + encodeURIComponent(kc.clientId);\n\n                        var timeLocal = new Date().getTime();\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200) {\n                                    logInfo('[KEYCLOAK] Token refreshed');\n\n                                    timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                                    var tokenResponse = JSON.parse(req.responseText);\n\n                                    setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n\n                                    kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setSuccess(true);\n                                    }\n                                } else {\n                                    logWarn('[KEYCLOAK] Failed to refresh token');\n\n                                    if (req.status == 400) {\n                                        kc.clearToken();\n                                    }\n\n                                    kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setError(true);\n                                    }\n                                }\n                            }\n                        };\n\n                        req.send(params);\n                    }\n                }\n            }\n\n            if (loginIframe.enable) {\n                var iframePromise = checkLoginIframe();\n                iframePromise.then(function() {\n                    exec();\n                }).catch(function() {\n                    promise.setError();\n                });\n            } else {\n                exec();\n            }\n\n            return promise.promise;\n        }\n\n        kc.clearToken = function() {\n            if (kc.token) {\n                setToken(null, null, null);\n                kc.onAuthLogout && kc.onAuthLogout();\n                if (kc.loginRequired) {\n                    kc.login();\n                }\n            }\n        }\n\n        function getRealmUrl() {\n            if (typeof kc.authServerUrl !== 'undefined') {\n                if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n                    return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n                } else {\n                    return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n                }\n            } else {\n            \treturn undefined;\n            }\n        }\n\n        function getOrigin() {\n            if (!window.location.origin) {\n                return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n            } else {\n                return window.location.origin;\n            }\n        }\n\n        function processCallback(oauth, promise) {\n            var code = oauth.code;\n            var error = oauth.error;\n            var prompt = oauth.prompt;\n\n            var timeLocal = new Date().getTime();\n\n            if (oauth['kc_action_status']) {\n                kc.onActionUpdate && kc.onActionUpdate(oauth['kc_action_status']);\n            }\n\n            if (error) {\n                if (prompt != 'none') {\n                    var errorData = { error: error, error_description: oauth.error_description };\n                    kc.onAuthError && kc.onAuthError(errorData);\n                    promise && promise.setError(errorData);\n                } else {\n                    promise && promise.setSuccess();\n                }\n                return;\n            } else if ((kc.flow != 'standard') && (oauth.access_token || oauth.id_token)) {\n                authSuccess(oauth.access_token, null, oauth.id_token, true);\n            }\n\n            if ((kc.flow != 'implicit') && code) {\n                var params = 'code=' + code + '&grant_type=authorization_code';\n                var url = kc.endpoints.token();\n\n                var req = new XMLHttpRequest();\n                req.open('POST', url, true);\n                req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n                params += '&client_id=' + encodeURIComponent(kc.clientId);\n                params += '&redirect_uri=' + oauth.redirectUri;\n\n                if (oauth.pkceCodeVerifier) {\n                    params += '&code_verifier=' + oauth.pkceCodeVerifier;\n                }\n\n                req.withCredentials = true;\n\n                req.onreadystatechange = function() {\n                    if (req.readyState == 4) {\n                        if (req.status == 200) {\n\n                            var tokenResponse = JSON.parse(req.responseText);\n                            authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n                            scheduleCheckIframe();\n                        } else {\n                            kc.onAuthError && kc.onAuthError();\n                            promise && promise.setError();\n                        }\n                    }\n                };\n\n                req.send(params);\n            }\n\n            function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n                timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                setToken(accessToken, refreshToken, idToken, timeLocal);\n\n                if (useNonce && ((kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce))) {\n\n                    logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n                    kc.clearToken();\n                    promise && promise.setError();\n                } else {\n                    if (fulfillPromise) {\n                        kc.onAuthSuccess && kc.onAuthSuccess();\n                        promise && promise.setSuccess();\n                    }\n                }\n            }\n\n        }\n\n        function loadConfig(url) {\n            var promise = createPromise();\n            var configUrl;\n\n            if (!config) {\n                configUrl = 'keycloak.json';\n            } else if (typeof config === 'string') {\n                configUrl = config;\n            }\n\n            function setupOidcEndoints(oidcConfiguration) {\n                if (! oidcConfiguration) {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/auth';\n                        },\n                        token: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/token';\n                        },\n                        logout: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/logout';\n                        },\n                        checkSessionIframe: function() {\n                            var src = getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n                            if (kc.iframeVersion) {\n                              src = src + '?version=' + kc.iframeVersion;\n                            }\n                            return src;\n                        },\n                        thirdPartyCookiesIframe: function() {\n                            var src = getRealmUrl() + '/protocol/openid-connect/3p-cookies/step1.html';\n                            if (kc.iframeVersion) {\n                                src = src + '?version=' + kc.iframeVersion;\n                            }\n                            return src;\n                        },\n                        register: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/registrations';\n                        },\n                        userinfo: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/userinfo';\n                        }\n                    };\n                } else {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return oidcConfiguration.authorization_endpoint;\n                        },\n                        token: function() {\n                            return oidcConfiguration.token_endpoint;\n                        },\n                        logout: function() {\n                            if (!oidcConfiguration.end_session_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.end_session_endpoint;\n                        },\n                        checkSessionIframe: function() {\n                            if (!oidcConfiguration.check_session_iframe) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.check_session_iframe;\n                        },\n                        register: function() {\n                            throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                        },\n                        userinfo: function() {\n                            if (!oidcConfiguration.userinfo_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.userinfo_endpoint;\n                        }\n                    }\n                }\n            }\n\n            if (configUrl) {\n                var req = new XMLHttpRequest();\n                req.open('GET', configUrl, true);\n                req.setRequestHeader('Accept', 'application/json');\n\n                req.onreadystatechange = function () {\n                    if (req.readyState == 4) {\n                        if (req.status == 200 || fileLoaded(req)) {\n                            var config = JSON.parse(req.responseText);\n\n                            kc.authServerUrl = config['auth-server-url'];\n                            kc.realm = config['realm'];\n                            kc.clientId = config['resource'];\n                            setupOidcEndoints(null);\n                            promise.setSuccess();\n                        } else {\n                            promise.setError();\n                        }\n                    }\n                };\n\n                req.send();\n            } else {\n                if (!config.clientId) {\n                    throw 'clientId missing';\n                }\n\n                kc.clientId = config.clientId;\n\n                var oidcProvider = config['oidcProvider'];\n                if (!oidcProvider) {\n                    if (!config['url']) {\n                        var scripts = document.getElementsByTagName('script');\n                        for (var i = 0; i < scripts.length; i++) {\n                            if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                                config.url = scripts[i].src.substr(0, scripts[i].src.indexOf('/js/keycloak.js'));\n                                break;\n                            }\n                        }\n                    }\n                    if (!config.realm) {\n                        throw 'realm missing';\n                    }\n\n                    kc.authServerUrl = config.url;\n                    kc.realm = config.realm;\n                    setupOidcEndoints(null);\n                    promise.setSuccess();\n                } else {\n                    if (typeof oidcProvider === 'string') {\n                        var oidcProviderConfigUrl;\n                        if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n                            oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n                        } else {\n                            oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n                        }\n                        var req = new XMLHttpRequest();\n                        req.open('GET', oidcProviderConfigUrl, true);\n                        req.setRequestHeader('Accept', 'application/json');\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200 || fileLoaded(req)) {\n                                    var oidcProviderConfig = JSON.parse(req.responseText);\n                                    setupOidcEndoints(oidcProviderConfig);\n                                    promise.setSuccess();\n                                } else {\n                                    promise.setError();\n                                }\n                            }\n                        };\n\n                        req.send();\n                    } else {\n                        setupOidcEndoints(oidcProvider);\n                        promise.setSuccess();\n                    }\n                }\n            }\n\n            return promise.promise;\n        }\n\n        function fileLoaded(xhr) {\n            return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n        }\n\n        function setToken(token, refreshToken, idToken, timeLocal) {\n            if (kc.tokenTimeoutHandle) {\n                clearTimeout(kc.tokenTimeoutHandle);\n                kc.tokenTimeoutHandle = null;\n            }\n\n            if (refreshToken) {\n                kc.refreshToken = refreshToken;\n                kc.refreshTokenParsed = decodeToken(refreshToken);\n            } else {\n                delete kc.refreshToken;\n                delete kc.refreshTokenParsed;\n            }\n\n            if (idToken) {\n                kc.idToken = idToken;\n                kc.idTokenParsed = decodeToken(idToken);\n            } else {\n                delete kc.idToken;\n                delete kc.idTokenParsed;\n            }\n\n            if (token) {\n                kc.token = token;\n                kc.tokenParsed = decodeToken(token);\n                kc.sessionId = kc.tokenParsed.session_state;\n                kc.authenticated = true;\n                kc.subject = kc.tokenParsed.sub;\n                kc.realmAccess = kc.tokenParsed.realm_access;\n                kc.resourceAccess = kc.tokenParsed.resource_access;\n\n                if (timeLocal) {\n                    kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n                }\n\n                if (kc.timeSkew != null) {\n                    logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n                    if (kc.onTokenExpired) {\n                        var expiresIn = (kc.tokenParsed['exp'] - (new Date().getTime() / 1000) + kc.timeSkew) * 1000;\n                        logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n                        if (expiresIn <= 0) {\n                            kc.onTokenExpired();\n                        } else {\n                            kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                        }\n                    }\n                }\n            } else {\n                delete kc.token;\n                delete kc.tokenParsed;\n                delete kc.subject;\n                delete kc.realmAccess;\n                delete kc.resourceAccess;\n\n                kc.authenticated = false;\n            }\n        }\n\n        function decodeToken(str) {\n            str = str.split('.')[1];\n\n            str = str.replace(/-/g, '+');\n            str = str.replace(/_/g, '/');\n            switch (str.length % 4) {\n                case 0:\n                    break;\n                case 2:\n                    str += '==';\n                    break;\n                case 3:\n                    str += '=';\n                    break;\n                default:\n                    throw 'Invalid token';\n            }\n\n            str = decodeURIComponent(escape(atob(str)));\n\n            str = JSON.parse(str);\n            return str;\n        }\n\n        function createUUID() {\n            var hexDigits = '0123456789abcdef';\n            var s = generateRandomString(36, hexDigits).split(\"\");\n            s[14] = '4';\n            s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n            s[8] = s[13] = s[18] = s[23] = '-';\n            var uuid = s.join('');\n            return uuid;\n        }\n\n        function parseCallback(url) {\n            var oauth = parseCallbackUrl(url);\n            if (!oauth) {\n                return;\n            }\n\n            var oauthState = callbackStorage.get(oauth.state);\n\n            if (oauthState) {\n                oauth.valid = true;\n                oauth.redirectUri = oauthState.redirectUri;\n                oauth.storedNonce = oauthState.nonce;\n                oauth.prompt = oauthState.prompt;\n                oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n            }\n\n            return oauth;\n        }\n\n        function parseCallbackUrl(url) {\n            var supportedParams;\n            switch (kc.flow) {\n                case 'standard':\n                    supportedParams = ['code', 'state', 'session_state', 'kc_action_status'];\n                    break;\n                case 'implicit':\n                    supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in', 'kc_action_status'];\n                    break;\n                case 'hybrid':\n                    supportedParams = ['access_token', 'id_token', 'code', 'state', 'session_state', 'kc_action_status'];\n                    break;\n            }\n\n            supportedParams.push('error');\n            supportedParams.push('error_description');\n            supportedParams.push('error_uri');\n\n            var queryIndex = url.indexOf('?');\n            var fragmentIndex = url.indexOf('#');\n\n            var newUrl;\n            var parsed;\n\n            if (kc.responseMode === 'query' && queryIndex !== -1) {\n                newUrl = url.substring(0, queryIndex);\n                parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '?' + parsed.paramsString;\n                }\n                if (fragmentIndex !== -1) {\n                    newUrl += url.substring(fragmentIndex);\n                }\n            } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n                newUrl = url.substring(0, fragmentIndex);\n                parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '#' + parsed.paramsString;\n                }\n            }\n\n            if (parsed && parsed.oauthParams) {\n                if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n                    if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                } else if (kc.flow === 'implicit') {\n                    if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                }\n            }\n        }\n\n        function parseCallbackParams(paramsString, supportedParams) {\n            var p = paramsString.split('&');\n            var result = {\n                paramsString: '',\n                oauthParams: {}\n            }\n            for (var i = 0; i < p.length; i++) {\n                var split = p[i].indexOf(\"=\");\n                var key = p[i].slice(0, split);\n                if (supportedParams.indexOf(key) !== -1) {\n                    result.oauthParams[key] = p[i].slice(split + 1);\n                } else {\n                    if (result.paramsString !== '') {\n                        result.paramsString += '&';\n                    }\n                    result.paramsString += p[i];\n                }\n            }\n            return result;\n        }\n\n        function createPromise() {\n            // Need to create a native Promise which also preserves the\n            // interface of the custom promise type previously used by the API\n            var p = {\n                setSuccess: function(result) {\n                    p.resolve(result);\n                },\n\n                setError: function(result) {\n                    p.reject(result);\n                }\n            };\n            p.promise = new Promise(function(resolve, reject) {\n                p.resolve = resolve;\n                p.reject = reject;\n            });\n\n            p.promise.success = function(callback) {\n                logPromiseDeprecation();\n\n                this.then(function handleSuccess(value) {\n                    callback(value);\n                });\n\n                return this;\n            }\n\n            p.promise.error = function(callback) {\n                logPromiseDeprecation();\n\n                this.catch(function handleError(error) {\n                    callback(error);\n                });\n\n                return this;\n            }\n\n            return p;\n        }\n\n\n        function setupCheckLoginIframe() {\n            var promise = createPromise();\n\n            if (!loginIframe.enable) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            if (loginIframe.iframe) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            var iframe = document.createElement('iframe');\n            loginIframe.iframe = iframe;\n\n            iframe.onload = function() {\n                var authUrl = kc.endpoints.authorize();\n                if (authUrl.charAt(0) === '/') {\n                    loginIframe.iframeOrigin = getOrigin();\n                } else {\n                    loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n                }\n                promise.setSuccess();\n            }\n\n            var src = kc.endpoints.checkSessionIframe();\n            iframe.setAttribute('src', src );\n            iframe.setAttribute('title', 'keycloak-session-iframe' );\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            var messageCallback = function(event) {\n                if ((event.origin !== loginIframe.iframeOrigin) || (loginIframe.iframe.contentWindow !== event.source)) {\n                    return;\n                }\n\n                if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n                    return;\n                }\n\n\n                if (event.data != 'unchanged') {\n                    kc.clearToken();\n                }\n\n                var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n                for (var i = callbacks.length - 1; i >= 0; --i) {\n                    var promise = callbacks[i];\n                    if (event.data == 'error') {\n                        promise.setError();\n                    } else {\n                        promise.setSuccess(event.data == 'unchanged');\n                    }\n                }\n            };\n\n            window.addEventListener('message', messageCallback, false);\n\n            return promise.promise;\n        }\n\n        function scheduleCheckIframe() {\n            if (loginIframe.enable) {\n                if (kc.token) {\n                    setTimeout(function() {\n                        checkLoginIframe().then(function(unchanged) {\n                            if (unchanged) {\n                                scheduleCheckIframe();\n                            }\n                        });\n                    }, loginIframe.interval * 1000);\n                }\n            }\n        }\n\n        function checkLoginIframe() {\n            var promise = createPromise();\n\n            if (loginIframe.iframe && loginIframe.iframeOrigin ) {\n                var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n                loginIframe.callbackList.push(promise);\n                var origin = loginIframe.iframeOrigin;\n                if (loginIframe.callbackList.length == 1) {\n                    loginIframe.iframe.contentWindow.postMessage(msg, origin);\n                }\n            } else {\n                promise.setSuccess();\n            }\n\n            return promise.promise;\n        }\n\n        function check3pCookiesSupported() {\n            var promise = createPromise();\n\n            if (loginIframe.enable || kc.silentCheckSsoRedirectUri) {\n                var iframe = document.createElement('iframe');\n                iframe.setAttribute('src', kc.endpoints.thirdPartyCookiesIframe());\n                iframe.setAttribute('title', 'keycloak-3p-check-iframe' );\n                iframe.style.display = 'none';\n                document.body.appendChild(iframe);\n\n                var messageCallback = function(event) {\n                    if (iframe.contentWindow !== event.source) {\n                        return;\n                    }\n\n                    if (event.data !== \"supported\" && event.data !== \"unsupported\") {\n                        promise.setError();\n                    } else if (event.data === \"unsupported\") {\n                        loginIframe.enable = false;\n                        if (kc.silentCheckSsoFallback) {\n                            kc.silentCheckSsoRedirectUri = false;\n                        }\n                        logWarn(\"[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and \" +\n                            \"silent check-sso are not available.\")\n                    }\n\n                    document.body.removeChild(iframe);\n                    window.removeEventListener(\"message\", messageCallback);\n                    promise.setSuccess();\n                };\n\n                window.addEventListener('message', messageCallback, false);\n            } else {\n                promise.setSuccess();\n            }\n\n            return promise.promise;\n        }\n\n        function loadAdapter(type) {\n            if (!type || type == 'default') {\n                return {\n                    login: function(options) {\n                        window.location.replace(kc.createLoginUrl(options));\n                        return createPromise().promise;\n                    },\n\n                    logout: function(options) {\n                        window.location.replace(kc.createLogoutUrl(options));\n                        return createPromise().promise;\n                    },\n\n                    register: function(options) {\n                        window.location.replace(kc.createRegisterUrl(options));\n                        return createPromise().promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.location.href = accountUrl;\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return createPromise().promise;\n                    },\n\n                    redirectUri: function(options, encodeHash) {\n                        if (arguments.length == 1) {\n                            encodeHash = true;\n                        }\n\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return location.href;\n                        }\n                    }\n                };\n            }\n\n            if (type == 'cordova') {\n                loginIframe.enable = false;\n                var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                    if (window.cordova && window.cordova.InAppBrowser) {\n                        // Use inappbrowser for IOS and Android if available\n                        return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                    } else {\n                        return window.open(loginUrl, target, options);\n                    }\n                };\n\n                var shallowCloneCordovaOptions = function (userOptions) {\n                    if (userOptions && userOptions.cordovaOptions) {\n                        return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n                            options[optionName] = userOptions.cordovaOptions[optionName];\n                            return options;\n                        }, {});\n                    } else {\n                        return {};\n                    }\n                };\n\n                var formatCordovaOptions = function (cordovaOptions) {\n                    return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n                        options.push(optionName+\"=\"+cordovaOptions[optionName]);\n                        return options;\n                    }, []).join(\",\");\n                };\n\n                var createCordovaOptions = function (userOptions) {\n                    var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                    cordovaOptions.location = 'no';\n                    if (userOptions && userOptions.prompt == 'none') {\n                        cordovaOptions.hidden = 'yes';\n                    }\n                    return formatCordovaOptions(cordovaOptions);\n                };\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise();\n\n                        var cordovaOptions = createCordovaOptions(options);\n                        var loginUrl = kc.createLoginUrl(options);\n                        var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n                        var completed = false;\n\n                        var closed = false;\n                        var closeBrowser = function() {\n                            closed = true;\n                            ref.close();\n                        };\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (!completed) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    var callback = parseCallback(event.url);\n                                    processCallback(callback, promise);\n                                    closeBrowser();\n                                    completed = true;\n                                } else {\n                                    promise.setError();\n                                    closeBrowser();\n                                }\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (!closed) {\n                                promise.setError({\n                                    reason: \"closed_by_user\"\n                                });\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise();\n\n                        var logoutUrl = kc.createLogoutUrl(options);\n                        var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes');\n\n                        var error;\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            } else {\n                                error = true;\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (error) {\n                                promise.setError();\n                            } else {\n                                kc.clearToken();\n                                promise.setSuccess();\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise();\n                        var registerUrl = kc.createRegisterUrl();\n                        var cordovaOptions = createCordovaOptions(options);\n                        var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                                var oauth = parseCallback(event.url);\n                                processCallback(oauth, promise);\n                            }\n                        });\n                        return promise.promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n                            ref.addEventListener('loadstart', function(event) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    ref.close();\n                                }\n                            });\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        return 'http://localhost';\n                    }\n                }\n            }\n\n            if (type == 'cordova-native') {\n                loginIframe.enable = false;\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise();\n                        var loginUrl = kc.createLoginUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(loginUrl);\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise();\n                        var logoutUrl = kc.createLogoutUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            kc.clearToken();\n                            promise.setSuccess();\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise();\n                        var registerUrl = kc.createRegisterUrl(options);\n                        universalLinks.subscribe('keycloak' , function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n                        window.cordova.plugins.browsertab.openUrl(registerUrl);\n                        return promise.promise;\n\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.cordova.plugins.browsertab.openUrl(accountUrl);\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return \"http://localhost\";\n                        }\n                    }\n                }\n            }\n\n            throw 'invalid adapter type: ' + type;\n        }\n\n        var LocalStorage = function() {\n            if (!(this instanceof LocalStorage)) {\n                return new LocalStorage();\n            }\n\n            localStorage.setItem('kc-test', 'test');\n            localStorage.removeItem('kc-test');\n\n            var cs = this;\n\n            function clearExpired() {\n                var time = new Date().getTime();\n                for (var i = 0; i < localStorage.length; i++)  {\n                    var key = localStorage.key(i);\n                    if (key && key.indexOf('kc-callback-') == 0) {\n                        var value = localStorage.getItem(key);\n                        if (value) {\n                            try {\n                                var expires = JSON.parse(value).expires;\n                                if (!expires || expires < time) {\n                                    localStorage.removeItem(key);\n                                }\n                            } catch (err) {\n                                localStorage.removeItem(key);\n                            }\n                        }\n                    }\n                }\n            }\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var key = 'kc-callback-' + state;\n                var value = localStorage.getItem(key);\n                if (value) {\n                    localStorage.removeItem(key);\n                    value = JSON.parse(value);\n                }\n\n                clearExpired();\n                return value;\n            };\n\n            cs.add = function(state) {\n                clearExpired();\n\n                var key = 'kc-callback-' + state.state;\n                state.expires = new Date().getTime() + (60 * 60 * 1000);\n                localStorage.setItem(key, JSON.stringify(state));\n            };\n        };\n\n        var CookieStorage = function() {\n            if (!(this instanceof CookieStorage)) {\n                return new CookieStorage();\n            }\n\n            var cs = this;\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var value = getCookie('kc-callback-' + state);\n                setCookie('kc-callback-' + state, '', cookieExpiration(-100));\n                if (value) {\n                    return JSON.parse(value);\n                }\n            };\n\n            cs.add = function(state) {\n                setCookie('kc-callback-' + state.state, JSON.stringify(state), cookieExpiration(60));\n            };\n\n            cs.removeItem = function(key) {\n                setCookie(key, '', cookieExpiration(-100));\n            };\n\n            var cookieExpiration = function (minutes) {\n                var exp = new Date();\n                exp.setTime(exp.getTime() + (minutes*60*1000));\n                return exp;\n            };\n\n            var getCookie = function (key) {\n                var name = key + '=';\n                var ca = document.cookie.split(';');\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) == ' ') {\n                        c = c.substring(1);\n                    }\n                    if (c.indexOf(name) == 0) {\n                        return c.substring(name.length, c.length);\n                    }\n                }\n                return '';\n            };\n\n            var setCookie = function (key, value, expirationDate) {\n                var cookie = key + '=' + value + '; '\n                    + 'expires=' + expirationDate.toUTCString() + '; ';\n                document.cookie = cookie;\n            }\n        };\n\n        function createCallbackStorage() {\n            try {\n                return new LocalStorage();\n            } catch (err) {\n            }\n\n            return new CookieStorage();\n        }\n\n        function createLogger(fn) {\n            return function() {\n                if (kc.enableLogging) {\n                    fn.apply(console, Array.prototype.slice.call(arguments));\n                }\n            };\n        }\n    }\n\n    return Keycloak;\n})\n"],"sourceRoot":""}